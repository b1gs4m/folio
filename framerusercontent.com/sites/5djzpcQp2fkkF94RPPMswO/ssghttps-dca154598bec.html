import{create,shallow}from"https://framerusercontent.com/modules/XPZpWLgM1p9otlAim6ab/YZGwyfuvWTDLYoiYQunH/zustand.js";// @ts-ignore import{useRouter}from"framer";import{useRef,useTransition,useMemo,useEffect}from"react";// Create a function to generate
the initial state const createInitialState=()=>({totalItems:0,filters:{},randomizationSeed:null,search:"",sortOption:null,defaultSortOption:null,sortingUrlParameter:null,page:0,itemsPerPage:0,paginationType:null,paginationActive:false,paginationButtonsCount:0,searchFields:null});const
useBaseStore=create((set,get)=>({instances:{},getState:id=>{const path=getCurrentPath();const state=get().instances[path]?.[id];return state||createInitialState();},setState:(id,updates)=>{const path=getCurrentPath();set(state=>({instances:{...state.instances,[path]:{...state.instances[path],[id]:{...state.getState(id),...updates}}}}));},//
Example of how to update a specific state property setTotalItems:(id,totalItems)=>{get().setState(id,{totalItems});},setFilterValue:(id,fieldName,value)=>{const currentFilters=get().getState(id).filters;get().setState(id,{filters:{...currentFilters,[fieldName]:{...currentFilters[fieldName],value}}});},setRandomizationSeed:(id,randomizationSeed)=>{get().setState(id,{randomizationSeed});},setSearch:(id,search)=>{get().setState(id,{search});},setSortOption:(id,sortOption)=>{get().setState(id,{sortOption});},setPage:(id,page)=>{get().setState(id,{page});},setSearchFields:(id,searchFields)=>{get().setState(id,{searchFields});},setPaginationButtonsCount:(id,paginationButtonsCount)=>{get().setState(id,{paginationButtonsCount});},setPaginationType:(id,paginationType)=>{get().setState(id,{paginationType});},deinitializePaginationButton:id=>{get().setState(id,{paginationButtonsCount:get().getState(id).paginationButtonsCount-1});}}));const
useSuperfieldsStore=(id,selector,initialize=null)=>{const initializedRef=useRef(false);const[_,startTransition]=useTransition();const{currentRouteId}=useRouter();const previousRouteIdRef=useRef(currentRouteId);// Memoize the function wrappers const memoizedFunctions=useMemo(()=>{const
functions={};const state=useBaseStore.getState();for(const key in state){const value=state[key];if(typeof value==="function"){if(key.startsWith("set")){functions[key]=(...args)=>{if(typeof window!=="undefined"){startTransition(()=>value(id,...args));}else{value(id,...args);}};}else{functions[key]=(...args)=>value(id,...args);}}}return
functions;},[id]);// Reset the store when the route changes useEffect(()=>{if(previousRouteIdRef.current!==currentRouteId){// Route has changed, reset the initialized state previousRouteIdRef.current=currentRouteId;// If there's an initialize function,
call it with a fresh state if(initialize){const state=useBaseStore.getState();const freshState=createInitialState();initialize(freshState);state.setState(id,freshState);}initializedRef.current=true;}},[currentRouteId,id,initialize]);// Initial setup effect
useEffect(()=>{if(initialize&&!initializedRef.current){const state=useBaseStore.getState();const currentState=state.getState(id);const initializedState={...currentState};initialize(initializedState);state.setState(id,initializedState);}initializedRef.current=true;},[]);return
useBaseStore(state=>{const path=getCurrentPath();if(!state.instances[path]?.[id]){const initialState=createInitialState();state.setState(id,initialState);}let newState={...state.getState(id),...memoizedFunctions};return selector(newState);},shallow);};export
default useSuperfieldsStore;const getCurrentPath=()=>{if(typeof window==="undefined"){return"/";}return window.location.pathname;}; export const __FramerMetadata__ = {"exports":{"default":{"type":"variable","annotations":{"framerContractVersion":"1"}},"__FramerMetadata__":{"type":"variable"}}}
//# sourceMappingURL=./Store.map